(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1852:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var enterModule,reactHotLoader,leaveModule,_SearchPage__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3228);__webpack_require__.d(__webpack_exports__,"SearchPage",(function(){return _SearchPage__WEBPACK_IMPORTED_MODULE_0__.a})),(enterModule=__webpack_require__(1).enterModule)&&enterModule(module),reactHotLoader=__webpack_require__(1).default,leaveModule=__webpack_require__(1).leaveModule,reactHotLoader&&leaveModule(module)}.call(this,__webpack_require__(3)(module))},3228:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(module){__webpack_require__.d(__webpack_exports__,"a",(function(){return SearchPage}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),react_use__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3091),qs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(185),qs__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(qs__WEBPACK_IMPORTED_MODULE_2__),react_router__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(17),_SearchContext__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(125),_LegacySearchPage__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(3372);const _jsxFileName="/home/runner/work/backstage/backstage/plugins/search/src/components/SearchPage/SearchPage.tsx";var enterModule;(enterModule=__webpack_require__(1).enterModule)&&enterModule(module);const UrlUpdater=()=>{const location=Object(react_router__WEBPACK_IMPORTED_MODULE_3__.j)(),{term:term,setTerm:setTerm,types:types,setTypes:setTypes,pageCursor:pageCursor,setPageCursor:setPageCursor,filters:filters,setFilters:setFilters}=Object(_SearchContext__WEBPACK_IMPORTED_MODULE_4__.b)(),prevQueryParams=Object(react_use__WEBPACK_IMPORTED_MODULE_1__.a)(location.search);return Object(react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{if(location.search===prevQueryParams)return;const query=qs__WEBPACK_IMPORTED_MODULE_2___default.a.parse(location.search.substring(1),{arrayLimit:0})||{};query.filters&&setFilters(query.filters),query.query&&setTerm(query.query),query.pageCursor&&setPageCursor(query.pageCursor),query.types&&setTypes(query.types)}),[prevQueryParams,location,setTerm,setTypes,setPageCursor,setFilters]),Object(react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{const newParams=qs__WEBPACK_IMPORTED_MODULE_2___default.a.stringify({query:term,types:types,pageCursor:pageCursor,filters:filters},{arrayFormat:"brackets"}),newUrl=`${window.location.pathname}?${newParams}`;window.history.replaceState(null,document.title,newUrl)}),[term,types,pageCursor,filters]),null},SearchPage=()=>{const outlet=Object(react_router__WEBPACK_IMPORTED_MODULE_3__.l)();return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_SearchContext__WEBPACK_IMPORTED_MODULE_4__.a,{__self:void 0,__source:{fileName:_jsxFileName,lineNumber:91}},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(UrlUpdater,{__self:void 0,__source:{fileName:_jsxFileName,lineNumber:92}}),outlet||react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_LegacySearchPage__WEBPACK_IMPORTED_MODULE_5__.a,{__self:void 0,__source:{fileName:_jsxFileName,lineNumber:93}}))};var reactHotLoader,leaveModule;reactHotLoader=__webpack_require__(1).default,leaveModule=__webpack_require__(1).leaveModule,reactHotLoader&&(reactHotLoader.register(UrlUpdater,"UrlUpdater","/home/runner/work/backstage/backstage/plugins/search/src/components/SearchPage/SearchPage.tsx"),reactHotLoader.register(SearchPage,"SearchPage","/home/runner/work/backstage/backstage/plugins/search/src/components/SearchPage/SearchPage.tsx"),leaveModule(module))}).call(this,__webpack_require__(3)(module))},3229:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(module){__webpack_require__.d(__webpack_exports__,"a",(function(){return LegacySearchPage}));var _material_ui_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(22),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__),react_use__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(845),_LegacySearchBar__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3373),_LegacySearchResult__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3374),_backstage_core_components__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(55);const _jsxFileName="/home/runner/work/backstage/backstage/plugins/search/src/components/LegacySearchPage/LegacySearchPage.tsx";var enterModule;function _nullishCoalesce(lhs,rhsFn){return null!=lhs?lhs:rhsFn()}(enterModule=__webpack_require__(1).enterModule)&&enterModule(module);const LegacySearchPage=()=>{const[queryString,setQueryString]=Object(_backstage_core_components__WEBPACK_IMPORTED_MODULE_5__.useQueryParamState)("query"),[searchQuery,setSearchQuery]=Object(react__WEBPACK_IMPORTED_MODULE_1__.useState)(_nullishCoalesce(queryString,(()=>"")));Object(react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>setSearchQuery(_nullishCoalesce(queryString,(()=>"")))),[queryString]),Object(react_use__WEBPACK_IMPORTED_MODULE_2__.a)((()=>{setQueryString(searchQuery)}),200,[searchQuery]);return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_backstage_core_components__WEBPACK_IMPORTED_MODULE_5__.Page,{themeId:"home",__self:void 0,__source:{fileName:_jsxFileName,lineNumber:57}},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_backstage_core_components__WEBPACK_IMPORTED_MODULE_5__.Header,{title:"Search",__self:void 0,__source:{fileName:_jsxFileName,lineNumber:58}}),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_backstage_core_components__WEBPACK_IMPORTED_MODULE_5__.Content,{__self:void 0,__source:{fileName:_jsxFileName,lineNumber:59}},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_0__.a,{container:!0,direction:"row",__self:void 0,__source:{fileName:_jsxFileName,lineNumber:60}},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_0__.a,{item:!0,xs:12,__self:void 0,__source:{fileName:_jsxFileName,lineNumber:61}},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_LegacySearchBar__WEBPACK_IMPORTED_MODULE_3__.a,{handleSearch:event=>{event.preventDefault(),setSearchQuery(event.target.value)},handleClearSearchBar:()=>{setSearchQuery("")},searchQuery:searchQuery,__self:void 0,__source:{fileName:_jsxFileName,lineNumber:62}})),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_0__.a,{item:!0,xs:12,__self:void 0,__source:{fileName:_jsxFileName,lineNumber:68}},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_LegacySearchResult__WEBPACK_IMPORTED_MODULE_4__.a,{searchQuery:_nullishCoalesce(queryString,(()=>"")).toLocaleLowerCase("en-US"),__self:void 0,__source:{fileName:_jsxFileName,lineNumber:69}})))))};var reactHotLoader,leaveModule;reactHotLoader=__webpack_require__(1).default,leaveModule=__webpack_require__(1).leaveModule,reactHotLoader&&(reactHotLoader.register(LegacySearchPage,"LegacySearchPage","/home/runner/work/backstage/backstage/plugins/search/src/components/LegacySearchPage/LegacySearchPage.tsx"),leaveModule(module))}).call(this,__webpack_require__(3)(module))},3230:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(module){__webpack_require__.d(__webpack_exports__,"a",(function(){return FiltersButton}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_material_ui_icons_FilterList__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(771),_material_ui_icons_FilterList__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_material_ui_icons_FilterList__WEBPACK_IMPORTED_MODULE_1__),_material_ui_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(24),_material_ui_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(119),_material_ui_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(16);const _jsxFileName="/home/runner/work/backstage/backstage/plugins/search/src/components/LegacySearchPage/Filters/FiltersButton.tsx";var enterModule;(enterModule=__webpack_require__(1).enterModule)&&enterModule(module);const useStyles=Object(_material_ui_core__WEBPACK_IMPORTED_MODULE_2__.a)((theme=>({filters:{width:"250px",display:"flex"},icon:{margin:theme.spacing(-1,0,0,0)}}))),FiltersButton=({numberOfSelectedFilters:numberOfSelectedFilters,handleToggleFilters:handleToggleFilters})=>{const classes=useStyles();return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:classes.filters,__self:void 0,__source:{fileName:_jsxFileName,lineNumber:43}},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__.a,{className:classes.icon,"aria-label":"settings",onClick:handleToggleFilters,__self:void 0,__source:{fileName:_jsxFileName,lineNumber:44}},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_icons_FilterList__WEBPACK_IMPORTED_MODULE_1___default.a,{__self:void 0,__source:{fileName:_jsxFileName,lineNumber:49}})),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_4__.a,{variant:"h6",__self:void 0,__source:{fileName:_jsxFileName,lineNumber:51}},"Filters (",numberOfSelectedFilters||0,")"))};var reactHotLoader,leaveModule;reactHotLoader=__webpack_require__(1).default,leaveModule=__webpack_require__(1).leaveModule,reactHotLoader&&(reactHotLoader.register(useStyles,"useStyles","/home/runner/work/backstage/backstage/plugins/search/src/components/LegacySearchPage/Filters/FiltersButton.tsx"),reactHotLoader.register(FiltersButton,"FiltersButton","/home/runner/work/backstage/backstage/plugins/search/src/components/LegacySearchPage/Filters/FiltersButton.tsx"),leaveModule(module));try{FiltersButton.displayName="FiltersButton",FiltersButton.__docgenInfo={description:"",displayName:"FiltersButton",props:{numberOfSelectedFilters:{defaultValue:null,description:"",name:"numberOfSelectedFilters",required:!0,type:{name:"number"}},handleToggleFilters:{defaultValue:null,description:"",name:"handleToggleFilters",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../../plugins/search/src/components/LegacySearchPage/Filters/FiltersButton.tsx#FiltersButton"]={docgenInfo:FiltersButton.__docgenInfo,name:"FiltersButton",path:"../../plugins/search/src/components/LegacySearchPage/Filters/FiltersButton.tsx#FiltersButton"})}catch(__react_docgen_typescript_loader_error){}}).call(this,__webpack_require__(3)(module))},3231:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(module){__webpack_require__.d(__webpack_exports__,"a",(function(){return Filters}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_material_ui_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(24),_material_ui_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(371),_material_ui_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1070),_material_ui_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(16),_material_ui_core__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(65),_material_ui_core__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(323),_material_ui_core__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(529),_material_ui_core__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(523),_material_ui_core__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(367),_material_ui_core__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(190),_material_ui_core__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(88),_material_ui_core__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(369),_material_ui_core__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(137);const _jsxFileName="/home/runner/work/backstage/backstage/plugins/search/src/components/LegacySearchPage/Filters/Filters.tsx";var enterModule;(enterModule=__webpack_require__(1).enterModule)&&enterModule(module);const useStyles=Object(_material_ui_core__WEBPACK_IMPORTED_MODULE_1__.a)((theme=>({filters:{background:"transparent",boxShadow:"0px 0px 0px 0px"},checkbox:{padding:theme.spacing(0,1,0,1)},dropdown:{width:"100%"}}))),Filters=({filters:filters,filterOptions:filterOptions,resetFilters:resetFilters,updateSelected:updateSelected,updateChecked:updateChecked})=>{const classes=useStyles();return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_2__.a,{className:classes.filters,__self:void 0,__source:{fileName:_jsxFileName,lineNumber:75}},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__.a,{title:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_4__.a,{variant:"h6",__self:void 0,__source:{fileName:_jsxFileName,lineNumber:77}},"Filters"),action:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_5__.a,{color:"primary",onClick:()=>resetFilters(),__self:void 0,__source:{fileName:_jsxFileName,lineNumber:79}},"CLEAR ALL"),__self:void 0,__source:{fileName:_jsxFileName,lineNumber:76}}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_6__.a,{__self:void 0,__source:{fileName:_jsxFileName,lineNumber:84}}),0===filterOptions.kind.length&&0===filterOptions.lifecycle.length&&react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_7__.a,{__self:void 0,__source:{fileName:_jsxFileName,lineNumber:86}},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_4__.a,{variant:"subtitle2",__self:void 0,__source:{fileName:_jsxFileName,lineNumber:87}},"Filters cannot be applied to available results")),filterOptions.kind.length>0&&react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_7__.a,{__self:void 0,__source:{fileName:_jsxFileName,lineNumber:93}},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_4__.a,{variant:"subtitle2",__self:void 0,__source:{fileName:_jsxFileName,lineNumber:94}},"Kind"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_8__.a,{id:"outlined-select",onChange:e=>updateSelected(function _optionalChain(ops){let lastAccessLHS,value=ops[0],i=1;for(;i<ops.length;){const op=ops[i],fn=ops[i+1];if(i+=2,("optionalAccess"===op||"optionalCall"===op)&&null==value)return;"access"===op||"optionalAccess"===op?(lastAccessLHS=value,value=fn(value)):"call"!==op&&"optionalCall"!==op||(value=fn(((...args)=>value.call(lastAccessLHS,...args))),lastAccessLHS=void 0)}return value}([e,"optionalAccess",_=>_.target,"optionalAccess",_2=>_2.value])),variant:"outlined",className:classes.dropdown,value:filters.selected,__self:void 0,__source:{fileName:_jsxFileName,lineNumber:95}},filterOptions.kind.map((filter=>react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_9__.a,{selected:""===filter,dense:!0,key:filter,value:filter,__self:void 0,__source:{fileName:_jsxFileName,lineNumber:105}},filter))))),filterOptions.lifecycle.length>0&&react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_7__.a,{__self:void 0,__source:{fileName:_jsxFileName,lineNumber:118}},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_4__.a,{variant:"subtitle2",__self:void 0,__source:{fileName:_jsxFileName,lineNumber:119}},"Lifecycle"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_10__.a,{disablePadding:!0,dense:!0,__self:void 0,__source:{fileName:_jsxFileName,lineNumber:120}},filterOptions.lifecycle.map((filter=>react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_11__.a,{key:filter,dense:!0,button:!0,onClick:()=>updateChecked(filter),__self:void 0,__source:{fileName:_jsxFileName,lineNumber:122}},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_12__.a,{edge:"start",disableRipple:!0,className:classes.checkbox,color:"primary",checked:filters.checked.includes(filter),tabIndex:-1,value:filter,name:filter,__self:void 0,__source:{fileName:_jsxFileName,lineNumber:128}}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_13__.a,{id:filter,primary:filter,__self:void 0,__source:{fileName:_jsxFileName,lineNumber:138}})))))))};var reactHotLoader,leaveModule;reactHotLoader=__webpack_require__(1).default,leaveModule=__webpack_require__(1).leaveModule,reactHotLoader&&(reactHotLoader.register(useStyles,"useStyles","/home/runner/work/backstage/backstage/plugins/search/src/components/LegacySearchPage/Filters/Filters.tsx"),reactHotLoader.register(Filters,"Filters","/home/runner/work/backstage/backstage/plugins/search/src/components/LegacySearchPage/Filters/Filters.tsx"),leaveModule(module));try{Filters.displayName="Filters",Filters.__docgenInfo={description:"",displayName:"Filters",props:{filters:{defaultValue:null,description:"",name:"filters",required:!0,type:{name:"FiltersState"}},filterOptions:{defaultValue:null,description:"",name:"filterOptions",required:!0,type:{name:"FilterOptions"}},resetFilters:{defaultValue:null,description:"",name:"resetFilters",required:!0,type:{name:"() => void"}},updateSelected:{defaultValue:null,description:"",name:"updateSelected",required:!0,type:{name:"(filter: string) => void"}},updateChecked:{defaultValue:null,description:"",name:"updateChecked",required:!0,type:{name:"(filter: string) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../../plugins/search/src/components/LegacySearchPage/Filters/Filters.tsx#Filters"]={docgenInfo:Filters.__docgenInfo,name:"Filters",path:"../../plugins/search/src/components/LegacySearchPage/Filters/Filters.tsx#Filters"})}catch(__react_docgen_typescript_loader_error){}}).call(this,__webpack_require__(3)(module))},3372:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(module){var enterModule,reactHotLoader,leaveModule,_LegacySearchPage__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3229);__webpack_require__.d(__webpack_exports__,"a",(function(){return _LegacySearchPage__WEBPACK_IMPORTED_MODULE_0__.a})),(enterModule=__webpack_require__(1).enterModule)&&enterModule(module),reactHotLoader=__webpack_require__(1).default,leaveModule=__webpack_require__(1).leaveModule,reactHotLoader&&leaveModule(module)}).call(this,__webpack_require__(3)(module))},3373:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(module){__webpack_require__.d(__webpack_exports__,"a",(function(){return SearchBar}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(24),_material_ui_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(155),_material_ui_core_InputBase__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(842),_material_ui_core_IconButton__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(119),_material_ui_icons_Search__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(473),_material_ui_icons_Search__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_material_ui_icons_Search__WEBPACK_IMPORTED_MODULE_5__),_material_ui_icons_Clear__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(412),_material_ui_icons_Clear__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_material_ui_icons_Clear__WEBPACK_IMPORTED_MODULE_6__);const _jsxFileName="/home/runner/work/backstage/backstage/plugins/search/src/components/LegacySearchPage/LegacySearchBar.tsx";var enterModule;(enterModule=__webpack_require__(1).enterModule)&&enterModule(module);const useStyles=Object(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_1__.a)((()=>({root:{display:"flex",alignItems:"center"},input:{flex:1}}))),SearchBar=({searchQuery:searchQuery,handleSearch:handleSearch,handleClearSearchBar:handleClearSearchBar})=>{const classes=useStyles();return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_2__.a,{component:"form",onSubmit:e=>handleSearch(e),className:classes.root,__self:void 0,__source:{fileName:_jsxFileName,lineNumber:49}},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core_IconButton__WEBPACK_IMPORTED_MODULE_4__.a,{disabled:!0,type:"submit","aria-label":"search",__self:void 0,__source:{fileName:_jsxFileName,lineNumber:54}},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_icons_Search__WEBPACK_IMPORTED_MODULE_5___default.a,{__self:void 0,__source:{fileName:_jsxFileName,lineNumber:55}})),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core_InputBase__WEBPACK_IMPORTED_MODULE_3__.a,{className:classes.input,placeholder:"Search in Backstage",value:searchQuery,onChange:e=>handleSearch(e),inputProps:{"aria-label":"search backstage"},__self:void 0,__source:{fileName:_jsxFileName,lineNumber:57}}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core_IconButton__WEBPACK_IMPORTED_MODULE_4__.a,{"aria-label":"search",onClick:()=>handleClearSearchBar(),__self:void 0,__source:{fileName:_jsxFileName,lineNumber:64}},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_icons_Clear__WEBPACK_IMPORTED_MODULE_6___default.a,{__self:void 0,__source:{fileName:_jsxFileName,lineNumber:65}})))};var reactHotLoader,leaveModule;reactHotLoader=__webpack_require__(1).default,leaveModule=__webpack_require__(1).leaveModule,reactHotLoader&&(reactHotLoader.register(useStyles,"useStyles","/home/runner/work/backstage/backstage/plugins/search/src/components/LegacySearchPage/LegacySearchBar.tsx"),reactHotLoader.register(SearchBar,"SearchBar","/home/runner/work/backstage/backstage/plugins/search/src/components/LegacySearchPage/LegacySearchBar.tsx"),leaveModule(module));try{SearchBar.displayName="SearchBar",SearchBar.__docgenInfo={description:"",displayName:"SearchBar",props:{searchQuery:{defaultValue:null,description:"",name:"searchQuery",required:!0,type:{name:"string"}},handleSearch:{defaultValue:null,description:"",name:"handleSearch",required:!0,type:{name:"any"}},handleClearSearchBar:{defaultValue:null,description:"",name:"handleClearSearchBar",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../../plugins/search/src/components/LegacySearchPage/LegacySearchBar.tsx#SearchBar"]={docgenInfo:SearchBar.__docgenInfo,name:"SearchBar",path:"../../plugins/search/src/components/LegacySearchPage/LegacySearchBar.tsx#SearchBar"})}catch(__react_docgen_typescript_loader_error){}}).call(this,__webpack_require__(3)(module))},3374:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(module){__webpack_require__.d(__webpack_exports__,"a",(function(){return SearchResult}));var _material_ui_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(24),_material_ui_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(323),_material_ui_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(22),_material_ui_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(16),_material_ui_lab__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(530),react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__),react_use__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(211),_backstage_plugin_catalog_react__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(69),_Filters__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(3375),_backstage_catalog_model__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(37),_backstage_core_components__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(55),_backstage_core_plugin_api__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(7);const _jsxFileName="/home/runner/work/backstage/backstage/plugins/search/src/components/LegacySearchPage/LegacySearchResult.tsx";var enterModule;function _optionalChain(ops){let lastAccessLHS,value=ops[0],i=1;for(;i<ops.length;){const op=ops[i],fn=ops[i+1];if(i+=2,("optionalAccess"===op||"optionalCall"===op)&&null==value)return;"access"===op||"optionalAccess"===op?(lastAccessLHS=value,value=fn(value)):"call"!==op&&"optionalCall"!==op||(value=fn(((...args)=>value.call(lastAccessLHS,...args))),lastAccessLHS=void 0)}return value}(enterModule=__webpack_require__(1).enterModule)&&enterModule(module);const useStyles=Object(_material_ui_core__WEBPACK_IMPORTED_MODULE_0__.a)((theme=>({searchQuery:{color:theme.palette.text.primary,background:theme.palette.background.default,borderRadius:"10%"},tableHeader:{margin:theme.spacing(1,0,0,0),display:"flex"},divider:{width:"1px",margin:theme.spacing(0,2),padding:theme.spacing(2,0)}}))),columns=[{title:"Name",field:"name",highlight:!0,render:result=>react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_backstage_core_components__WEBPACK_IMPORTED_MODULE_10__.Link,{to:result.url||"",__self:void 0,__source:{fileName:_jsxFileName,lineNumber:79}},result.name)},{title:"Description",field:"description"},{title:"Owner",field:"owner"},{title:"Kind",field:"kind"},{title:"LifeCycle",field:"lifecycle"}],TableHeader=({searchQuery:searchQuery,numberOfSelectedFilters:numberOfSelectedFilters,numberOfResults:numberOfResults,handleToggleFilters:handleToggleFilters})=>{const classes=useStyles();return react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("div",{className:classes.tableHeader,__self:void 0,__source:{fileName:_jsxFileName,lineNumber:109}},react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_Filters__WEBPACK_IMPORTED_MODULE_8__.b,{numberOfSelectedFilters:numberOfSelectedFilters,handleToggleFilters:handleToggleFilters,__self:void 0,__source:{fileName:_jsxFileName,lineNumber:110}}),react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_1__.a,{className:classes.divider,orientation:"vertical",__self:void 0,__source:{fileName:_jsxFileName,lineNumber:114}}),react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_2__.a,{item:!0,xs:12,__self:void 0,__source:{fileName:_jsxFileName,lineNumber:115}},searchQuery?react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__.a,{variant:"h6",__self:void 0,__source:{fileName:_jsxFileName,lineNumber:117}},`${numberOfResults} `,numberOfResults>1?"results for ":"result for ",react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("span",{className:classes.searchQuery,__self:void 0,__source:{fileName:_jsxFileName,lineNumber:120}},'"',searchQuery,'"')," "):react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_3__.a,{variant:"h6",__self:void 0,__source:{fileName:_jsxFileName,lineNumber:123}},`${numberOfResults} results`)))},SearchResult=({searchQuery:searchQuery})=>{const catalogApi=Object(_backstage_core_plugin_api__WEBPACK_IMPORTED_MODULE_11__.useApi)(_backstage_plugin_catalog_react__WEBPACK_IMPORTED_MODULE_7__.catalogApiRef),[showFilters,toggleFilters]=Object(react__WEBPACK_IMPORTED_MODULE_5__.useState)(!1),[selectedFilters,setSelectedFilters]=Object(react__WEBPACK_IMPORTED_MODULE_5__.useState)({selected:"",checked:[]}),[filteredResults,setFilteredResults]=Object(react__WEBPACK_IMPORTED_MODULE_5__.useState)([]),{loading:loading,error:error,value:results}=Object(react_use__WEBPACK_IMPORTED_MODULE_6__.a)((async()=>(await catalogApi.getEntities()).items.map((entity=>({name:entity.metadata.name,description:entity.metadata.description,owner:"string"==typeof _optionalChain([entity,"access",_=>_.spec,"optionalAccess",_2=>_2.owner])?_optionalChain([entity,"access",_3=>_3.spec,"optionalAccess",_4=>_4.owner]):void 0,kind:entity.kind,lifecycle:"string"==typeof _optionalChain([entity,"access",_5=>_5.spec,"optionalAccess",_6=>_6.lifecycle])?_optionalChain([entity,"access",_7=>_7.spec,"optionalAccess",_8=>_8.lifecycle]):void 0,url:`/catalog/${_optionalChain([entity,"access",_9=>_9.metadata,"access",_10=>_10.namespace,"optionalAccess",_11=>_11.toLocaleLowerCase,"call",_12=>_12("en-US")])||_backstage_catalog_model__WEBPACK_IMPORTED_MODULE_9__.b}/${entity.kind.toLocaleLowerCase("en-US")}/${entity.metadata.name}`})))),[]);if(Object(react__WEBPACK_IMPORTED_MODULE_5__.useEffect)((()=>{if(results){let withFilters=results;""!==selectedFilters.selected&&(withFilters=results.filter((result=>selectedFilters.selected.includes(result.kind)))),selectedFilters.checked.length>0&&(withFilters=withFilters.filter((result=>result.lifecycle&&selectedFilters.checked.includes(result.lifecycle)))),searchQuery&&(withFilters=withFilters.filter((result=>_optionalChain([result,"access",_13=>_13.name,"optionalAccess",_14=>_14.toLocaleLowerCase,"call",_15=>_15("en-US"),"access",_16=>_16.includes,"call",_17=>_17(searchQuery)])||_optionalChain([result,"access",_18=>_18.name,"optionalAccess",_19=>_19.toLocaleLowerCase,"call",_20=>_20("en-US"),"access",_21=>_21.includes,"call",_22=>_22(searchQuery.split(" ").join("-"))])||_optionalChain([result,"access",_23=>_23.description,"optionalAccess",_24=>_24.toLocaleLowerCase,"call",_25=>_25("en-US"),"access",_26=>_26.includes,"call",_27=>_27(searchQuery)])))),setFilteredResults(withFilters)}}),[selectedFilters,searchQuery,results]),loading)return react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_backstage_core_components__WEBPACK_IMPORTED_MODULE_10__.Progress,{__self:void 0,__source:{fileName:_jsxFileName,lineNumber:204}});if(error)return react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_material_ui_lab__WEBPACK_IMPORTED_MODULE_4__.a,{severity:"error",__self:void 0,__source:{fileName:_jsxFileName,lineNumber:208}},"Error encountered while fetching search results. ",error.toString());if(!results||0===results.length)return react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_backstage_core_components__WEBPACK_IMPORTED_MODULE_10__.EmptyState,{missing:"data",title:"Sorry, no results were found",__self:void 0,__source:{fileName:_jsxFileName,lineNumber:214}});const filterOptions=results.reduce(((acc,curr)=>(curr.kind&&acc.kind.indexOf(curr.kind)<0&&acc.kind.push(curr.kind),curr.lifecycle&&acc.lifecycle.indexOf(curr.lifecycle)<0&&acc.lifecycle.push(curr.lifecycle),acc)),{kind:[],lifecycle:[]});return react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_5___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_2__.a,{container:!0,__self:void 0,__source:{fileName:_jsxFileName,lineNumber:264}},showFilters&&react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_2__.a,{item:!0,xs:3,__self:void 0,__source:{fileName:_jsxFileName,lineNumber:266}},react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_Filters__WEBPACK_IMPORTED_MODULE_8__.a,{filters:selectedFilters,filterOptions:filterOptions,resetFilters:()=>{setSelectedFilters({selected:"",checked:[]})},updateSelected:filter=>{setSelectedFilters((prevState=>({...prevState,selected:filter})))},updateChecked:filter=>{selectedFilters.checked.includes(filter)?setSelectedFilters((prevState=>({...prevState,checked:prevState.checked.filter((item=>item!==filter))}))):setSelectedFilters((prevState=>({...prevState,checked:[...prevState.checked,filter]})))},__self:void 0,__source:{fileName:_jsxFileName,lineNumber:267}})),react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_2__.a,{item:!0,xs:showFilters?9:12,__self:void 0,__source:{fileName:_jsxFileName,lineNumber:276}},react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_backstage_core_components__WEBPACK_IMPORTED_MODULE_10__.Table,{options:{paging:!0,pageSize:20,search:!1},data:filteredResults,columns:columns,title:react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(TableHeader,{searchQuery:searchQuery,numberOfResults:filteredResults.length,numberOfSelectedFilters:(""!==selectedFilters.selected?1:0)+selectedFilters.checked.length,handleToggleFilters:()=>toggleFilters(!showFilters),__self:void 0,__source:{fileName:_jsxFileName,lineNumber:282}}),__self:void 0,__source:{fileName:_jsxFileName,lineNumber:277}}))))};var reactHotLoader,leaveModule;reactHotLoader=__webpack_require__(1).default,leaveModule=__webpack_require__(1).leaveModule,reactHotLoader&&(reactHotLoader.register(useStyles,"useStyles","/home/runner/work/backstage/backstage/plugins/search/src/components/LegacySearchPage/LegacySearchResult.tsx"),reactHotLoader.register(columns,"columns","/home/runner/work/backstage/backstage/plugins/search/src/components/LegacySearchPage/LegacySearchResult.tsx"),reactHotLoader.register(TableHeader,"TableHeader","/home/runner/work/backstage/backstage/plugins/search/src/components/LegacySearchPage/LegacySearchResult.tsx"),reactHotLoader.register(SearchResult,"SearchResult","/home/runner/work/backstage/backstage/plugins/search/src/components/LegacySearchPage/LegacySearchResult.tsx"),leaveModule(module));try{SearchResult.displayName="SearchResult",SearchResult.__docgenInfo={description:"",displayName:"SearchResult",props:{searchQuery:{defaultValue:null,description:"",name:"searchQuery",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../../plugins/search/src/components/LegacySearchPage/LegacySearchResult.tsx#SearchResult"]={docgenInfo:SearchResult.__docgenInfo,name:"SearchResult",path:"../../plugins/search/src/components/LegacySearchPage/LegacySearchResult.tsx#SearchResult"})}catch(__react_docgen_typescript_loader_error){}}).call(this,__webpack_require__(3)(module))},3375:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(module){var _FiltersButton__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3230);__webpack_require__.d(__webpack_exports__,"b",(function(){return _FiltersButton__WEBPACK_IMPORTED_MODULE_0__.a}));var enterModule,reactHotLoader,leaveModule,_Filters__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3231);__webpack_require__.d(__webpack_exports__,"a",(function(){return _Filters__WEBPACK_IMPORTED_MODULE_1__.a})),(enterModule=__webpack_require__(1).enterModule)&&enterModule(module),reactHotLoader=__webpack_require__(1).default,leaveModule=__webpack_require__(1).leaveModule,reactHotLoader&&leaveModule(module)}).call(this,__webpack_require__(3)(module))}}]);